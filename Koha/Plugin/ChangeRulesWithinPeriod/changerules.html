<div id="changerules-circ" class="page-section">
  <div id="changerules-out" class="alert alert-warning"></div>
  <div id="changerules-in" class="alert alert-danger d-none"></div>
  <a class="btn btn-primary" href="/cgi-bin/koha/plugins/run.pl?class=Koha%3A%3APlugin%3A%3AChangeRulesWithinPeriod&method=configure"></a>
</div>

<script>
$(document).ready(async function() {
  try {
    const apiResponse = await fetch('/api/v1/contrib/changerules/config');
    if (!apiResponse.ok)
    throw new Error('error while fetching ressources');
    
    const data = await apiResponse.json();
    document.getElementById('changerules-out').textContent = data.alert_warning;
    document.getElementById('changerules-in').innerHTML = data.alert_danger;
    document.querySelector('#changerules-circ a.btn').textContent = data.configure_link;
  }
  catch {
    console.error('Error fetching configuration:', error);
  }
});
</script>
